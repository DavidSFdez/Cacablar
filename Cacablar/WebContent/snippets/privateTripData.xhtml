<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<h3>#Pasajeros</h3>
	<p:dataTable id="asientos" var="var" value="#{trip.getSeats()}"
		border="1">
		<p:column>
			<f:facet name="header">#IDUser</f:facet>#{var.userId}</p:column>
		<p:column>
			<f:facet name="header">#Comment</f:facet>#{var.comment}</p:column>
		<p:column>
			<f:facet name="header">#Status</f:facet>#{var.status}</p:column>
		<p:column>
			<f:facet name="header">#Action</f:facet>
					<p:commandButton value="#Cancelar plaza" action="#{seat.cancelSeat(user.user.id,trip.trip.id)}" rendered="#{trip.isSitting(user.user.id) and var.userId == user.user.id}" />
			</p:column>
	
	</p:dataTable>
	
	 <h:outputText value="Su petición todavía se encuentra pendiente: " />
	 <p:commandButton value="#Cancelar solicitud" action="#{trip.cancelApplication(user.user.id,trip.trip.id)}" rendered="#{trip.isUserInApplications(user.user.id)}" />

	<h:form rendered="#{trip.trip.promoterId == user.user.id}">
		<h3>Peticiones</h3>
		<p:dataTable id="peticiones" var="var"
			value="#{trip.getApplications()}"
			rendered="#{trip.trip.promoterId == user.user.id}" border="1">
			<p:column>
				<f:facet name="header">#IDUser</f:facet>#{var.userId}</p:column>
			<p:column>
				<f:facet name="header">#Actions</f:facet>
		Aqui (O en dos columnas separadas) se añaden los botones de cancelar y aceptar
		* Aceptar: Se borra de TApplications y aparece en TSEATS en estado aceptado
		* Cancelar: Se borra de TApplications y aparece en TSEATS en estado cancelado
		* Si quedan 0 plazas libres todos los demás asientos de TAPPLICATIONS se borran y se añaden en TSEATS como SIN_PLAZA (esto no estoy seguro, el estado sin plaza es nuevo de esta entrega)
		</p:column>
		</p:dataTable>
	</h:form>
</ui:composition>