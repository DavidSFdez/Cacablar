<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/template-general.xhtml">

	<f:metadata>
		<f:viewParam name="updateTrip" value="#{wizard.id}" />
		<f:event listener="#{wizard.updateTripData}" type="preRenderView"></f:event>
	</f:metadata>

	<ui:define name="title">Registrar Viaje</ui:define>

	<ui:define name="content">
		<f:event listener="#{user.checkIfLogged}" type="preRenderView" />
		<h:form id="registrar" action="registrarViaje">


			<p:growl id="growl" sticky="true" showDetail="true" />

			<p:wizard id="w" flowListener="#{wizard.onFlowProcess}">
				<p:tab id="origen" title="Origen">
					<p:panel header="Datos salida">
						<p:messages />
						<h:panelGrid columns="2" columnClasses="label, value">
							<h:outputText value="Calle: *" />
							<p:inputText id="calle" value="#{wizard.addressD}" required="true" />

							<h:outputText value="Ciudad: *" />
							<p:inputText value="#{wizard.cityD}" required="true" />

							<h:outputText value="Provincia: *" />
							<p:inputText value="#{wizard.stateD}" required="true" />

							<h:outputText value="País: *" />
							<p:inputText value="#{wizard.countryD}" required="true" />

							<h:outputText value="Código postal: *" />
							<p:inputText value="#{wizard.zipCodeD}" required="true" />

							<h:outputText value="Coordenadas latitud:" />
							<p:inputText value="#{wizard.latD}" />

							<h:outputText value="Coordenadas longitud" />
							<p:inputText value="#{wizard.lonD}" />


							<p:outputLabel for="fechaSalida" value="Fecha Salida: *" />
							<p:calendar id="fechaSalida" value="#{wizard.trip.departureDate}"
								pattern="MM/dd/yyyy HH:mm:ss" mindate="#{wizard.today}"
								required="true" />

						</h:panelGrid>
					</p:panel>
				</p:tab>

				<p:tab id="destino" title="Destino">
					<p:panel header="Datos Destino">
						<p:messages />
						<h:panelGrid columns="2" columnClasses="label, value">
							<h:outputText value="Calle: *" />
							<p:inputText value="#{wizard.addressA}" required="true" />

							<h:outputText value="Ciudad: *" />
							<p:inputText value="#{wizard.cityA}" required="true" />

							<h:outputText value="Provincia: *" />
							<p:inputText value="#{wizard.stateA}" required="true" />

							<h:outputText value="País: *" />
							<p:inputText value="#{wizard.countryA}" required="true" />

							<h:outputText value="Código postal: *" />
							<p:inputText value="#{wizard.zipCodeA}" required="true" />

							<h:outputText value="Coordenadas latitud:" />
							<p:inputText value="#{wizard.latA}" />

							<h:outputText value="Coordenadas longitud" />
							<p:inputText value="#{wizard.lonA}" />

							<p:outputLabel for="fechaLlegada" value="Fecha Llegada: *" />
							<p:calendar id="fechaLlegada" value="#{wizard.trip.arrivalDate}"
								pattern="MM/dd/yyyy HH:mm:ss"
								mindate="#{wizard.trip.departureDate}" required="true" />

						</h:panelGrid>
					</p:panel>
				</p:tab>

				<p:tab id="otrosDatos" title="Otros Datos">
					<p:panel header="Otros Datos">
						<p:messages />
						<h:panelGrid columns="2" columnClasses="label, value">

							<p:outputLabel for="fechaCierre" value="Fecha de cierre: *" />
							<p:calendar id="fechaCierre" value="#{wizard.trip.closingDate}"
								pattern="MM/dd/yyyy HH:mm:ss" mindate="#{wizard.today}"
								maxdate="#{wizard.trip.departureDate}" required="true" />


							<h:outputText value="Coste: *" />
							<p:spinner id="cost" value="#{wizard.trip.estimatedCost}"
								prefix="€" min="0" required="true" />

							<h:outputText value="Descripción o comentarios: *" />
							<p:inputTextarea rows="3" cols="33"
								value="#{wizard.trip.comments}" required="true" />

							<h:outputLabel for="maxPax" value="Número de plazas: *" />
							<p:spinner id="maxPax" value="#{wizard.trip.maxPax}" min="1"
								required="true" rendered="#{wizard.update==false}" />


						</h:panelGrid>
					</p:panel>
				</p:tab>

				<p:tab id="confirm" title="Confirmacion">
					<p:panel header="Confirmacion">
						<h:panelGrid id="confirmacion" columns="3"
							columnClasses="grid,grid,grid">
							<h:panelGrid columns="2" columnClasses="label, value">
								<h:outputText value="Calle Salida: " />
								<h:outputText value="#{wizard.addressD}"
									styleClass="outputLabel" />

								<h:outputText value="Ciudad Salida: " />
								<h:outputText value="#{wizard.cityD}" styleClass="outputLabel" />

								<h:outputText value="Provincia Salida: " />
								<h:outputText value="#{wizard.stateD}" styleClass="outputLabel" />

								<h:outputText value="País salida: " />
								<h:outputText value="#{wizard.countryD}"
									styleClass="outputLabel" />

								<h:outputText value="Codigo Postal Salida: " />
								<h:outputText value="#{wizard.zipCodeD}"
									styleClass="outputLabel" />

								<h:outputText value="Coordenadas latitud Salida: " />
								<h:outputText value="#{wizard.latD}" styleClass="outputLabel" />

								<h:outputText value="Coordenadas longitud salida: " />
								<h:outputText value="#{wizard.lonD}" styleClass="outputLabel" />

								<h:outputText value="Fecha salida: " />
								<h:outputText value="#{wizard.trip.departureDate}"
									styleClass="outputLabel" />
							</h:panelGrid>

							<h:panelGrid columns="2" columnClasses="label, value">
								<h:outputText value="Calle Destino: " />
								<h:outputText value="#{wizard.addressA}"
									styleClass="outputLabel" />

								<h:outputText value="Calle Ciudad: " />
								<h:outputText value="#{wizard.cityA}" styleClass="outputLabel" />

								<h:outputText value="Provincia Destino: " />
								<h:outputText value="#{wizard.stateA}" styleClass="outputLabel" />

								<h:outputText value="País Destino: " />
								<h:outputText value="#{wizard.countryA}"
									styleClass="outputLabel" />

								<h:outputText value="Codigo Postal Destino: " />
								<h:outputText value="#{wizard.zipCodeA}"
									styleClass="outputLabel" />

								<h:outputText value="Coordenadas latitud Destino: " />
								<h:outputText value="#{wizard.latA}" styleClass="outputLabel" />

								<h:outputText value="Coordenadas longitud Destino: " />
								<h:outputText value="#{wizard.lonA}" styleClass="outputLabel" />

								<h:outputText value="Fecha Llegada: " />
								<h:outputText value="#{wizard.trip.arrivalDate}"
									styleClass="outputLabel" />
							</h:panelGrid>

							<h:panelGrid columns="2" columnClasses="label, value">
								<h:outputText value="Fecha Cierre: " />
								<h:outputText value="#{wizard.trip.closingDate}"
									styleClass="outputLabel" />

								<h:outputText value="Coste: " />
								<h:outputText value="#{wizard.trip.estimatedCost}"
									styleClass="outputLabel" />

								<h:outputText value="Descripción o comentarios: " />
								<h:outputText value="#{wizard.trip.comments}"
									styleClass="outputLabel" />

								<h:outputText value="Número de plazas " />
								<h:outputText value="#{wizard.trip.maxPax}"
									styleClass="outputLabel" />

								<h:outputText value="Plazas disponibles: " />
								<h:outputText value="#{wizard.trip.availablePax}"
									styleClass="outputLabel" rendered="#{wizard.update}" />

								<h:outputText />
								<h:outputText />
							</h:panelGrid>
						</h:panelGrid>

						<p:commandButton value="#Submit"
							action="#{wizard.save(user.user.id)}" update="growl"
							process="@this" rendered="#{wizard.update==false}" />
						<p:commandButton value="#Modificar"
							action="#{wizard.updateTrip(user.user.id)}" update="growl"
							process="@this" rendered="#{wizard.update}" />
					</p:panel>
				</p:tab>
			</p:wizard>
			<p:commandButton id="precarga" value="precarga"
				action="#{wizard.preloadTripData}" update="w"
				rendered="#{wizard.update==false}" />
		</h:form>
	</ui:define>

</ui:composition>
