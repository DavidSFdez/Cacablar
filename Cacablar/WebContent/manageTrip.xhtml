<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/template-general.xhtml">

	<f:metadata>
		<f:viewParam name="updateTrip" value="#{wizard.id}" />
		<f:event listener="#{wizard.updateTripData}" type="preRenderView"></f:event>
	</f:metadata>

	<ui:define name="title">#{msgs.manageTrip_title}</ui:define>

	<ui:define name="content">
		<f:event listener="#{user.checkIfLogged}" type="preRenderView" />
		<h:form id="registrar" action="registrarViaje">


			<p:growl id="growl" sticky="true" showDetail="true" />

			<p:wizard id="w" flowListener="#{wizard.onFlowProcess}">
				<p:tab id="origen" title="#{msgs.manageTrip_tabDepature}">
					<p:panel header="#{msgs.manageTrip_tabDepature}">
						<p:messages />
						<h:panelGrid columns="2" columnClasses="label, value">
							<h:outputText value="#{msgs.address}: *" />
							<p:inputText id="calle" value="#{wizard.addressD}"
								 />

							<h:outputText value="#{msgs.city}: *" />
							<p:inputText value="#{wizard.cityD}"  />

							<h:outputText value="#{msgs.state}: *" />
							<p:inputText value="#{wizard.stateD}"  />

							<h:outputText value="#{msgs.country}: *" />
							<p:inputText value="#{wizard.countryD}"  />

							<h:outputText value="#{msgs.zipCode}: *" />
							<p:inputText value="#{wizard.zipCodeD}"  />

							<h:outputText value="#{msgs.latitude}:" />
							<p:inputText value="#{wizard.latD}" />

							<h:outputText value="#{msgs.longitude}:" />
							<p:inputText value="#{wizard.lonD}" />

							<p:outputLabel for="fechaSalida" value="#{msgs.departureDate}: *" />
							<p:calendar id="fechaSalida" value="#{wizard.trip.departureDate}"
								pattern="MM/dd/yyyy HH:mm:ss" mindate="#{wizard.today}"
								 />

						</h:panelGrid>
					</p:panel>
				</p:tab>

				<p:tab id="destino" title="#{msgs.destination}">
					<p:panel header="#{msgs.destination}">
						<p:messages />
						<h:panelGrid columns="2" columnClasses="label, value">
							<h:outputText value="#{msgs.address}: *" />
							<p:inputText value="#{wizard.addressA}"  />

							<h:outputText value="#{msgs.city}: *" />
							<p:inputText value="#{wizard.cityA}"  />

							<h:outputText value="#{msgs.state}: *" />
							<p:inputText value="#{wizard.stateA}"  />

							<h:outputText value="#{msgs.country}: *" />
							<p:inputText value="#{wizard.countryA}"  />

							<h:outputText value="#{msgs.zipCode}: *" />
							<p:inputText value="#{wizard.zipCodeA}"  />

							<h:outputText value="#{msgs.latitude}:" />
							<p:inputText value="#{wizard.latA}" />

							<h:outputText value="#{msgs.longitude}:" />
							<p:inputText value="#{wizard.lonA}" />

							<p:outputLabel for="fechaLlegada" value="#{msgs.arrivalDate}: *" />
							<p:calendar id="fechaLlegada" value="#{wizard.trip.arrivalDate}"
								pattern="MM/dd/yyyy HH:mm:ss"
								mindate="#{wizard.trip.departureDate}"  />

						</h:panelGrid>
					</p:panel>
				</p:tab>

				<p:tab id="otrosDatos" title="#{msgs.manageTrip_tabData}">
					<p:panel header="#{msgs.manageTrip_tabData}">
						<p:messages />
						<h:panelGrid columns="2" columnClasses="label, value">

							<p:outputLabel for="fechaCierre" value="#{msgs.closingDate}: *" />
							<p:calendar id="fechaCierre" value="#{wizard.trip.closingDate}"
								pattern="MM/dd/yyyy HH:mm:ss" mindate="#{wizard.today}"
								maxdate="#{wizard.trip.departureDate}"  />

							<h:outputText value="#{msgs.estimatedCost}: *" />
							<p:spinner id="cost" value="#{wizard.trip.estimatedCost}"
								prefix="â‚¬" min="0"  />

							<h:outputText value="#{msgs.comments}: *" />
							<p:inputTextarea rows="3" cols="33"
								value="#{wizard.trip.comments}"  />

							<h:outputLabel for="maxPax" value="#{msgs.maxPax}: *" />
							<p:spinner id="maxPax" value="#{wizard.trip.maxPax}" min="1"
								 rendered="#{wizard.update==false}" />

						</h:panelGrid>
					</p:panel>
				</p:tab>

				<p:tab id="confirm" title="#{msgs.manageTrip_tabConfirm}">
					<p:panel header="#{msgs.manageTrip_tabConfirm}">
						<h:panelGrid id="confirmacion" columns="3"
							columnClasses="grid,grid,grid">

							<h:panelGrid columns="2" columnClasses="label, value">

								<h:outputText value="#{msgs.departure}" />
								<h:outputText value=" " />

								<h:outputText value="#{msgs.address}: " />
								<h:outputText value="#{wizard.addressD}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.city}: " />
								<h:outputText value="#{wizard.cityD}" styleClass="outputLabel" />

								<h:outputText value="#{msgs.state}: " />
								<h:outputText value="#{wizard.stateD}" styleClass="outputLabel" />

								<h:outputText value="#{msgs.country}: " />
								<h:outputText value="#{wizard.countryD}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.zipCode}: " />
								<h:outputText value="#{wizard.zipCodeD}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.latitude}: " />
								<h:outputText value="#{wizard.latD}" styleClass="outputLabel" />

								<h:outputText value="#{msgs.longitude}: " />
								<h:outputText value="#{wizard.lonD}" styleClass="outputLabel" />

								<h:outputText value="#{msgs.departureDate}: " />
								<h:outputText value="#{wizard.trip.departureDate}"
									styleClass="outputLabel" />
							</h:panelGrid>

							<h:panelGrid columns="2" columnClasses="label, value">

								<h:outputText value="#{msgs.destination}" />
								<h:outputText value=" " />

								<h:outputText value="#{msgs.address}: " />
								<h:outputText value="#{wizard.addressA}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.city}: " />
								<h:outputText value="#{wizard.cityA}" styleClass="outputLabel" />

								<h:outputText value="#{msgs.state}: " />
								<h:outputText value="#{wizard.stateA}" styleClass="outputLabel" />

								<h:outputText value="#{msgs.country}: " />
								<h:outputText value="#{wizard.countryA}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.zipCode}: " />
								<h:outputText value="#{wizard.zipCodeA}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.latitude}: " />
								<h:outputText value="#{wizard.latA}" styleClass="outputLabel" />

								<h:outputText value="#{msgs.longitude}: " />
								<h:outputText value="#{wizard.lonA}" styleClass="outputLabel" />

								<h:outputText value="#{msgs.arrivalDate}: " />
								<h:outputText value="#{wizard.trip.arrivalDate}"
									styleClass="outputLabel" />
							</h:panelGrid>

							<h:panelGrid columns="2" columnClasses="label, value">
								<h:outputText value="#{msgs.closingDate}: " />
								<h:outputText value="#{wizard.trip.closingDate}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.estimatedCost}: " />
								<h:outputText value="#{wizard.trip.estimatedCost}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.comments}: " />
								<h:outputText value="#{wizard.trip.comments}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.maxPax}: " />
								<h:outputText value="#{wizard.trip.maxPax}"
									styleClass="outputLabel" />

								<h:outputText value="#{msgs.availablePax}: " />
								<h:outputText value="#{wizard.trip.availablePax}"
									styleClass="outputLabel" rendered="#{wizard.update}" />

								<h:outputText />
								<h:outputText />
							</h:panelGrid>
						</h:panelGrid>

						<p:commandButton value="#{msgs.accept}"
							action="#{wizard.save(user.user.id)}" update="growl"
							process="@this" rendered="#{wizard.update==false}" />
						<p:commandButton value="#{msgs.accept}"
							action="#{wizard.updateTrip(user.user.id)}" update="growl"
							process="@this" rendered="#{wizard.update}" />
					</p:panel>
				</p:tab>
			</p:wizard>
			<p:commandButton id="precarga" value="#{msgs.manageTrip_preloadButtom}"
				action="#{wizard.preloadTripData}" update="w"
				rendered="#{wizard.update==false}" />
		</h:form>
	</ui:define>

</ui:composition>
